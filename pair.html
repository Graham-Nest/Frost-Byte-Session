<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pair Code</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@600&display=swap');

    body {
      font-family: 'Orbitron', sans-serif;
      margin: 0;
      height: 100vh;
      /* Modified: Dark purple gradient background */
      background: linear-gradient(135deg, #1a002e, #3c005a, #2c003e);
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
    }

    /* Container for floating circles */
    .floating-circles-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden; /* Ensures circles don't spill out */
      z-index: 1; /* Positioned above the starfield (z-index: 0) but below content (z-index: 2) */
    } 

    /* Style for individual floating circles */
    .floating-circle {
      position: absolute;
      /* Modified: Pink/purple gradient for circles */
      background: radial-gradient(circle, rgba(255, 100, 200, 0.1) 0%, rgba(200, 0, 255, 0.05) 70%);
      border-radius: 50%;
      opacity: 0.5;
      /* Modified: Neon pink glow for circles */
      box-shadow: 0 0 15px rgba(255, 0, 170, 0.3);
      pointer-events: none; /* So they don't interfere with mouse events */
      animation: float 15s ease-in-out infinite alternate; /* Default animation */
    }

    /* Keyframes for the floating animation */
    @keyframes float {
      0% {
        transform: translateY(0) translateX(0) scale(1);
        opacity: 0.5;
      }
      50% {
        transform: translateY(-150px) translateX(50px) scale(1.2); /* Float up and slightly right */
        opacity: 0.8;
      }
      100% {
        transform: translateY(0) translateX(-50px) scale(1); /* Return to original position, slightly left */
        opacity: 0.5;
      }
    }

    .display-text {
      font-family: 'Rajdhani', sans-serif;
      letter-spacing: 0.5px;
    }

    body::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: url('https://www.transparenttextures.com/patterns/stardust.png');
      opacity: 0.15;
      z-index: 0;
      animation: stars 60s linear infinite;
    }

    @keyframes stars {
      0% { background-position: 0 0; }
      100% { background-position: 1000px 1000px; }
    }

    .orbit {
      position: absolute;
      width: 300px;
      height: 300px;
      border: 2px dashed rgba(0, 255, 255, 0.2);
      border-radius: 50%;
      animation: rotateOrbit 20s linear infinite;
      z-index: 0;
    }

    @keyframes rotateOrbit {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .container {
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .box {
      width: 100%;
      max-width: 320px;
      margin: 0 16px;
      padding: 25px;
      /* Modified: Dark purple background for the inner container */
      background: rgba(44, 0, 62, 0.3);
      backdrop-filter: blur(10px);
      border-radius: 18px;
      /* Modified: Neon pink glow and subtle white inset shadow */
      box-shadow: 0 0 25px rgba(255, 0, 170, 0.4), inset 0 0 10px rgba(255, 255, 255, 0.1);
      text-align: center;
      /* Modified: Subtle white border */
      border: 1px solid rgba(255, 255, 255, 0.1);
      animation: fadeIn 1s ease-in-out;
      box-sizing: border-box;
    }

    @keyframes fadeIn {
      from {
        transform: scale(0.9);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    .centered-text {
      color: white;
      margin-bottom: 10px;
    }

    .input-container-vertical {
      display: flex;
      flex-direction: column;
      margin-top: 15px;
      gap: 10px;
    }

    .styled-input,
    .styled-submit {
      width: 100%;
      padding: 1rem;
      border-radius: 0.5rem;
      font-size: 14px;
      box-sizing: border-box;
    }

    .styled-input {
      border: none;
      background: #f4f4f4;
      color: #000;
    }

    .styled-submit {
      /* Modified: Neon pink background */
      background: #ff00cc;
      color: white;
      border: none;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .styled-submit:hover {
      /* Modified: Neon pink to purple gradient on hover */
      background: linear-gradient(135deg, #ff00cc, #cc00ff);
    }

    #pair {
      margin-top: 15px;
    }

    #copy-btn {
      display: none;
      margin-top: 10px;
      background: #00c9a7;
      border: none;
      color: white;
      padding: 0.6rem 1.2rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s ease;
    }

    #copy-btn:hover {
      background: #00b39e;
    }

    @media (max-width: 500px) {
      .styled-input,
      .styled-submit,
      #copy-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <!-- Floating Circles Container -->
  <div class="floating-circles-container"></div>

  <div class="orbit"></div>
  <div class="container">
    <div class="box" id="box">
      <i class="fa fa-user" style="color:white; font-size: 20px;"></i>
      <h3 class="centered-text display-text">FROST-BYTE PAIR CODE</h3>
      <h6 class="centered-text display-text">Powered By Dev-Graham</h6>
      <h6 class="centered-text display-text">Enter Your Number with Country Code</h6>

      <div class="input-container-vertical">
        <input placeholder="1234567890" type="number" id="number" class="styled-input" />
        <button id="submit" class="styled-submit display-text">Submit</button>
      </div>

      <div id="pair" class="display-text"></div>
      <button id="copy-btn" class="display-text">Copy Code</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"></script>
  <script>
    const pairEl = document.getElementById("pair");
    const submitBtn = document.getElementById("submit");
    const numberInput = document.getElementById("number");
    const copyBtn = document.getElementById("copy-btn");

    let lastCode = '';

    async function copyToClipboard() {
      if (!lastCode) return;
      await navigator.clipboard.writeText(lastCode);
      copyBtn.innerText = "Copied!";
      setTimeout(() => copyBtn.innerText = "Copy Code", 1500);
    }

    submitBtn.addEventListener("click", async (e) => {
      e.preventDefault();
      let rawNumber = numberInput.value.replace(/[^0-9]/g, "");

      if (!rawNumber) {
        pairEl.innerHTML = `<span class="display-text" style="color:white;font-weight:bold">Enter your WhatsApp number with Country Code</span>`;
        return;
      }

      if (rawNumber.length < 11) {
        pairEl.innerHTML = `<span class="display-text" style="color:orange;font-weight:bold">Invalid Number</span>`;
        return;
      }

      let formatted = "+" + rawNumber;
      numberInput.type = "text";
      numberInput.value = formatted;
      numberInput.style = "color:black;font-size:20px";

      pairEl.innerHTML = `<span class="display-text" style="color:white;font-weight:bold">Please Wait...</span>`;
      copyBtn.style.display = "none";

      try {
        // Assuming the API endpoint is relative to the current origin
        const { data } = await axios.get(`/code?number=${rawNumber}`);
        lastCode = data.code || "Service Unavailable";
        pairEl.innerHTML = `<span class="display-text" id="copy" style="color:red;font-weight:bold">CODE: <span style="color:white;">${lastCode}</span></span>`;
        copyBtn.style.display = "inline-block";
      } catch (err) {
        console.error("Error fetching code:", err); // Log the error for debugging
        pairEl.innerHTML = `<span class="display-text" style="color:red;font-weight:bold">Error fetching code.</span>`;
        copyBtn.style.display = "none";
      }
    });

    copyBtn.addEventListener("click", copyToClipboard);

    // --- Floating Circles Logic ---
    const floatingCirclesContainer = document.querySelector('.floating-circles-container');

    function createFloatingCircle() {
      const circle = document.createElement('div');
      circle.classList.add('floating-circle');

      // Random size: between 150px and 250px for "big" circles
      const size = Math.random() * 100 + 150; // Range: 150px to 250px
      circle.style.width = `${size}px`;
      circle.style.height = `${size}px`;

      // Random position: place them within the viewport
      // To ensure they are visible and don't get cut off too much at the edges,
      // we can adjust the positioning range slightly or ensure the animation
      // doesn't push them too far off screen.
      // For now, let's keep the 0-100% range, as the animation's transform
      // is relative to their initial position.
      const top = Math.random() * 100; // 0% to 100% of viewport height
      const left = Math.random() * 100; // 0% to 100% of viewport width
      circle.style.top = `${top}%`;
      circle.style.left = `${left}%`;

      // Random animation duration: between 10s and 25s
      const duration = Math.random() * 15 + 10;
      circle.style.animationDuration = `${duration}s`;

      // Random animation delay: between 0s and 10s
      const delay = Math.random() * 10;
      circle.style.animationDelay = `${delay}s`;

      // Random opacity: between 0.2 and 0.6 for a subtle effect
      circle.style.opacity = Math.random() * 0.4 + 0.2;

      floatingCirclesContainer.appendChild(circle);
    }

    // Create 5 floating circles as requested
    const numberOfCircles = 5; // Changed from 20 to 5
    for (let i = 0; i < numberOfCircles; i++) {
      createFloatingCircle();
    }
    // --- End Floating Circles Logic ---
  </script>
</body>
</html>
